<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <script
      src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.0/dist/alpine.min.js"
      defer
    ></script>
    <title>Missy Tee - clothing store</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>

    <script class="garmentListTemplate" type="type/script-x">
      	<div>
      		{{garments.length}} <strong>garments found</strong>
      	</div>
      	<div class="garments">
      		{{#each garments}}

      	<div class="garment">
      	<img src="/images/{{img}}" alt="">

      	<form action="/garment/" method="post">
      		<input type="hidden" name="img" value="{{img}}" >
      		<div class="field" >
      			{{description}}
      		</div>
      		<div class="field">
      			<strong>{{price}}</strong>
      		</div>
      	</form>

      	<div class="hidden">
      		<button data-garmentId="{{id}}" >Add to cart</button>
      	</div>

      </div>
      {{/each}}
      	</div>
    </script>
  </head>
  <body>
    <div class="container">
      <div
        x-data="{ garments: [], newGarments: [], addGarment: false}"
        x-init="fetch('./garments.json')
      .then(r => r.json())
      .then(garmentData => garments = garmentData )"
      >
        <h1>Missy Tee - clothing store</h1>

        <div class="top-section">
          <div class="filter">
            <h2>Filter</h2>
            <div class="genders">
              <label>
                <input type="radio" name="gender" value="All" /> All
              </label>

              <label>
                <input type="radio" name="gender" value="Male" /> Male
              </label>

              <label>
                <input type="radio" name="gender" value="Female" /> Female
              </label>
              <label>
                <input type="radio" name="gender" value="Unisex" /> Unisex
              </label>
            </div>
            <div class="seasons">
              <label>
                <input type="radio" name="season" value="All" /> All
              </label>
              <label>
                <input type="radio" name="season" value="Summer" /> Summer
              </label>
              <label>
                <input type="radio" name="season" value="Winter" /> Winter
              </label>
              <label>
                <input type="radio" name="season" value="All Seasons" /> All
                seasons
              </label>
            </div>
            <div>
              Filter by price range:
              <input
                type="range"
                name="priceRange"
                max="1000"
                step="50"
                class="priceRange"
                value="0"
              />
              R<span class="showPriceRange">0</span>.00
            </div>
          </div>
          <!-- <div class="cart hidden" >
				<h2>Shopping Cart</h2>
				<table>
					<thead>
						<tr>
							<th>Items</th>
							<th>Qty</th>
							<th>Total</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Items xyz</td>
							<td>3</td>
							<td>R17.25</td>
						</tr>
						<tr>
							<td>Items xyz</td>
							<td>3</td>
							<td>R17.25</td>
						</tr>

					</tbody>
					<tfoot>
						<tr>
							<th>Total</th>
							<td></td>
							<th>R34.50</th>
						</tr>
					</tfoot>		
				</table>

				<button>Checkout</button>

			</div> -->
        </div>
        <br />
        <div class="message hidden"></div>
        <br />
        <div class="addGarment">
          <div class="add button mt1">
            <a href="">Add garmet</a>
          </div>
          <div class="add garment">
            <form x-on:submit.prevent>
              <h2>Add garment</h2>
              <!-- <img src="/images/{{img}}" alt="" /> -->
              <div class="field">
                <label for="">Description</label>
                <input
                  type="text"
                  name="description"
                  class="description"
                  x-model="newGarments.description"
                />
              </div>
              <div class="field">
                <label for="">Image</label>
                <input
                  type="text"
                  name="img"
                  class="img"
                  x-model="newGarments.img"
                />
              </div>
              <div class="field">
                <label for="">Price</label>
                <input
                  type="number"
                  name="price"
                  step="0.01"
                  class="price"
                  x-model="newGarments.price"
                />
              </div>
              <div class="field">
                <label for="">Gender</label>
                <div>
                  <input
                    type="text"
                    name="gender"
                    class="gender"
                    x-model="newGarments.gender"
                  />
                </div>
              </div>
              <div class="field">
                <label for="">Season</label>
                <div>
                  <input
                    type="text"
                    name="season"
                    class="season"
                    x-model="newGarments.season"
                  />
                </div>
              </div>
              <br />
              <button
                @click="addGarment = ! addGarment, newGarments.push({garmentDescr: newGarments.description, garmentImg: newGarments.img, garmentPrice: newGarments.price, garmentseason: newGarments.season, garmentGender: newGarments.gender})"
              >
                Add
              </button>
            </form>
            <!-- </div> -->
          </div>
        </div>

        <div>
          <h2>Garments</h2>

          <div class="searchResults">
            <template x-for="garment in garments">
              <div>
                <span x-text="garment.description"></span>
                R<span x-text="garment.price"></span>
                <img x-bind:src="`./images/${garment.img}`" />
              </div>
            </template>
            <template x-for="add in newGarments">
                <div class="garment garments">
                <span x-text="add.garmentDescr"></span>
                R<span x-text="add.garmentPrice"></span>
                <img src="./images/fashion.png" />
             </div>
            </template>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
